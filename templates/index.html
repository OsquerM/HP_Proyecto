<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Harry Potter Quiz</title>
    <link rel="stylesheet" href="/static/css/index.css">
    <script src="/static/js/magic.js" defer></script>
    <script src="/static/js/musica.js" defer></script>
</head>
<body>

<!-- MÃºsica -->
<audio id="bgMusic" loop>
    <source src="/static/audio/hogwarts.mp3" type="audio/mpeg">
    Tu navegador no soporta audio.
</audio>

<!-- BotÃ³n mÃºsica -->
<button id="musicButton" onclick="toggleMusic()" class="music-button">
    ðŸ”Š MÃºsica ON
</button>

<!-- Fondo -->
<div class="background"></div>

<!-- Niebla -->
<div class="fog fog1"></div>
<div class="fog fog2"></div>

<!-- PartÃ­culas -->
<canvas id="magicCanvas"></canvas>

<!-- Contenido -->
<div class="container">
    <h1 class="title">Harry Potter Quiz</h1>
    <p class="subtitle">Descubre tu verdadera casa en Hogwarts</p>
    <a href="/quiz" class="start-button">Comenzar Quiz</a>
    <br><br>
    <a href="/admin/login" class="admin-button">Admin</a>
</div>

<script>
    // MÃºsica: reproducir al primer clic del usuario
    const music = document.getElementById("bgMusic");
    const button = document.getElementById("musicButton");
    let playing = false;

    document.body.addEventListener("click", () => {
        if (!playing) {
            music.play().catch(e => console.log("Autoplay bloqueado", e));
            playing = true;
        }
    }, { once: true });

    function toggleMusic() {
        if (music.paused) {
            music.play();
            button.innerText = "ðŸ”Š MÃºsica ON";
        } else {
            music.pause();
            button.innerText = "ðŸ”‡ MÃºsica OFF";
        }
    }
</script>

</body>
</html>
